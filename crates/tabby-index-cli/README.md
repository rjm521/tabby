# Tabby Index CLI

Tabby Index CLI 是一个用于管理和操作 Tabby 索引的命令行工具。它提供了多个子命令来帮助用户查看、测试和管理索引。

## 全局参数

所有命令都支持以下全局参数：

| 参数 | 简写 | 说明 | 是否必须 |
|------|------|------|----------|
| `--index-dir` | `-i` | 指定索引目录的路径 | 否 |

## 可用命令

### 1. Inspect

检查索引的详细信息，包括空间使用情况、段信息等。

```bash
tabby-index-cli inspect
```

### 2. Head

查看索引中的文档内容。

| 参数 | 简写 | 说明 | 默认值 |
|------|------|------|--------|
| `--num-docs` | `-n` | 要显示的文档数量 | 1 |
| `--corpus` | `-c` | 要查询的语料库 | "code" |

示例：
```bash
tabby-index-cli head -n 5 -c code
```

### 3. Bench

对索引进行性能基准测试。

| 参数 | 简写 | 说明 | 是否必须 |
|------|------|------|----------|
| `--queries` | `-q` | 查询文件路径 | 是 |
| `--num-repeat` | `-n` | 重复测试的次数 | 否（默认1次） |

示例：
```bash
tabby-index-cli bench -q queries.txt -n 3
```

## 输出说明

### Inspect 命令输出
- 索引目录信息
- 段数量
- 总字节数
- 每个段的详细信息：
  - 文档数量
  - 存储空间使用情况
  - 术语字典空间使用情况
  - 快速字段空间使用情况
  - 倒排索引空间使用情况
  - 位置信息空间使用情况

### Head 命令输出
- 以 JSON 格式显示指定数量的文档内容

### Bench 命令输出
- 搜索性能测试结果：
  - 查询文本
  - 命中数量
  - 执行时间（微秒）
- 存储获取性能测试结果：
  - 查询文本
  - 执行时间（微秒）

## 注意事项

1. 确保在使用命令前已经创建了有效的索引
2. 对于大型索引，某些操作可能需要较长时间
3. 建议在进行基准测试时使用有代表性的查询文件